<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        siyuan&#39;s blog | SJTU
    </title>
    <!-- 图标 -->
    <link rel="icon" href="/img/favicon.png">
    <!-- 字体 -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <!-- 样式 -->
    <link rel="stylesheet" href="/css/style.css">
<meta name="generator" content="Hexo 8.1.1"></head>

<body>
    <!-- 顶部进度条：颜色已改为 FFC800 (黄色) -->
    <div id="progress-bar"
        style="position: fixed; top: 0; left: 0; height: 3px; background: #FFC800; width: 0%; z-index: 9999; transition: width 0.1s;">
    </div>

    <nav class="navbar">
        <div class="nav-left">
            <div class="menu">
                <a href="/">Home</a>
                <a href="/archives">Archives</a>
                <a href="/about">About Me</a>
            </div>
        </div>
        <div class="nav-right">
            <a href="mailto:siyuanzhang@sjtu.edu.cn" class="nav-icon" title="Email Me">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" />
                </svg>
            </a>
            <a href="https://github.com/ssyzhang" target="_blank" class="nav-icon" title="Visit my GitHub">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                </svg>
            </a>

            <!-- 新增：Hugging Face -->
            <a href="https://huggingface.co/siyzhang" target="_blank" class="nav-icon" title="Hugging Face">
                <svg viewBox="0 0 24 24">
                    <path
                        d="M12.986 2.015a3.845 3.845 0 0 0-4.664.912c-.524.524-.805 1.155-.886 1.838a3.178 3.178 0 0 0-1.28-.27 3.18 3.18 0 0 0-3.18 3.18v.85c0 .32.062.63.167.925l-.266.307a4.26 4.26 0 0 0-.586 4.908l1.45 2.508a2.59 2.59 0 0 0 3.666.86c.15-.09.288-.2.414-.325.297.357.696.613 1.155.707.25.49.585.932.99 1.305.676.623 1.547.965 2.464.965.918 0 1.79-.342 2.465-.965.405-.373.74-.815.99-1.305.46-.094.858-.35 1.155-.707.126.126.264.236.414.325a2.59 2.59 0 0 0 3.666-.86l1.45-2.508a4.26 4.26 0 0 0-.586-4.908l-.266-.307c.105-.295.167-.605.167-.925v-.85a3.18 3.18 0 0 0-3.18-3.18 3.178 3.178 0 0 0-1.28.27c-.08-.683-.362-1.314-.886-1.838a3.845 3.845 0 0 0-4.664-.912ZM9.444 6.66c.583 0 1.055.472 1.055 1.056 0 .583-.472 1.055-1.055 1.055-.584 0-1.056-.472-1.056-1.055 0-.584.472-1.056 1.056-1.056Zm5.112 0c.583 0 1.055.472 1.055 1.056 0 .583-.472 1.055-1.055 1.055-.584 0-1.056-.472-1.056-1.055 0-.584.472-1.056 1.056-1.056Z" />
                </svg>
            </a>
        </div>
    </nav>

    <main>
        <div class="vscode-wrapper">
    <!-- 标题栏 -->
    <div class="window-header">
        <div class="traffic-lights">
            <div class="dot close"></div>
            <div class="dot minimize"></div>
            <div class="dot maximize"></div>
        </div>
        <!-- 标题栏文字居中 -->
        <div style="margin: 0 auto; color: #999; font-size: 0.8rem; font-family: sans-serif;">
            day4:使用embedding实现自然语言搜索 - Hello World!
        </div>
    </div>

    <div class="vscode-body">
        <!-- 侧边栏 -->
        <div class="vscode-sidebar">
            <div class="side-icon active"></div>
            <div class="side-icon"></div>
            <div class="side-icon"></div>
        </div>

        <!-- 内容区 -->
        <div style="flex: 1; background: var(--vscode-bg);">
            <!-- 标签页 -->
            <div style="background: #1e1e1e; height: 35px; display: flex; border-bottom: 1px solid #252526;">
                <div
                    style="padding: 0 20px; display: flex; align-items: center; color: #fff; border-top: 1px solid var(--accent-color); background: #1e1e1e; font-size: 0.8rem; border-right: 1px solid #252526;">
                    <span style="color: #f1e05a; margin-right: 8px; font-weight: bold;">JS</span>
                    day4:使用embedding实现自然语言搜索.md
                </div>
            </div>

            <!-- 面包屑 -->
            <div style="padding: 10px 40px; color: #555; font-size: 0.8rem; font-family: monospace;">
                src > posts > day4:使用embedding实现自然语言搜索
            </div>

            <!-- 正文 -->
            <article class="post-content">
                <h1>
                    day4:使用embedding实现自然语言搜索
                </h1>
                <div style="color: #666; margin-bottom: 30px; font-family: monospace; font-size: 0.8rem;">
                    // Author: SiyuanZhang<br>
                    // Published: 2025-12-08
                </div>

                <h2 id="使用embedding实现自然语言搜索"><a href="#使用embedding实现自然语言搜索" class="headerlink" title="使用embedding实现自然语言搜索"></a><center>使用embedding实现自然语言搜索</center></h2><hr>
<ol>
<li>embedding的调用</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> config.load_key <span class="keyword">import</span> load_key</span><br><span class="line"><span class="keyword">from</span> langchain_openai.embeddings <span class="keyword">import</span> OpenAIEmbeddings</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> langchain_openai <span class="keyword">import</span> ChatOpenAI</span><br><span class="line">os.environ[<span class="string">&quot;SLICONFLOW_API_KEY&quot;</span>] = load_key(<span class="string">&quot;SLICONFLOW_API_KEY&quot;</span>)</span><br><span class="line">os.environ[<span class="string">&quot;OPENAI_API_KEY&quot;</span>] = load_key(<span class="string">&quot;OPENAI_API_KEY&quot;</span>)</span><br><span class="line">llm = ChatOpenAI(</span><br><span class="line">    base_url=<span class="string">&quot;https://dashscope.aliyuncs.com/compatible-mode/v1&quot;</span>,</span><br><span class="line">    model=<span class="string">&quot;qwen-flash&quot;</span>,</span><br><span class="line">)</span><br><span class="line">embedding_model = OpenAIEmbeddings(</span><br><span class="line">    model=<span class="string">&quot;Qwen/Qwen3-Embedding-4B&quot;</span>,</span><br><span class="line">    base_url=<span class="string">&quot;https://api.siliconflow.cn/v1&quot;</span>,</span><br><span class="line">    api_key=load_key(<span class="string">&quot;SLICONFLOW_API_KEY&quot;</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">text_1=<span class="string">&quot;this is a test query&quot;</span></span><br><span class="line">text_2=<span class="string">&quot;hello!&quot;</span></span><br><span class="line">vector = embedding_model.embed_query(text_2)</span><br><span class="line"><span class="built_in">print</span>(vector)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">len</span>(vector))</span><br></pre></td></tr></table></figure>

<pre><code>[-0.0006495226407423615, 0.0037509934045374393, 0.025980906561017036, -0.021174438297748566, -0.003962088376283646, 0.04260868579149246, 0.04234887659549713, -0.031956516206264496, 0.0353340320289135, 0.05404028296470642, -0.00896341260522604, -0.03975078463554382, 0.007014844566583633, -0.06001589447259903, 0.10340400785207748, -0.0420890673995018, 0.02052491530776024, -0.014874069020152092, 0.034294795244932175, -0.004189420957118273, -0.022863198071718216, 0.04286849498748779, 0.07170730084180832, -0.007664367090910673, -0.01123674213886261, 0.015848353505134583, -0.028578996658325195, -0.034814413636922836, 0.013250262476503849, -0.04104983061552048, -0.06391303241252899, -0.019745487719774246, 0.12834568321704865, 0.0030365183483809233, 0.004871420096606016, -0.0387115515768528, -0.00020703535119537264, 0.0008322009234689176, -0.031177086755633354, 0.03325555846095085, 0.01675768382847309, -0.0387115515768528, 0.01961558498442173, -0.012275977991521358, 0.005585894919931889, -0.01208112109452486, 0.008833508007228374, -0.040790021419525146, 0.01123674213886261, -0.040790021419525146, 0.006430274341255426, -0.0014045927673578262, 0.037672314792871475, -0.009483030997216702, -0.019225871190428734, -0.037932123988866806, 0.10340400785207748, -0.007339606061577797, -0.018836157396435738, -0.005033800378441811, -0.00103111716452986, -0.007372082211077213, -0.00574827566742897, -0.019745487719774246, 0.0035723745822906494, -0.04156944900751114, -0.0193557757884264, -0.08677622675895691, 0.0193557757884264, -0.030787372961640358, -0.01961558498442173, -0.009547983296215534, -0.014484355226159096, 0.024032337591052055, -0.0049363719299435616, -0.018316539004445076, -0.0024194719735533, 0.03585365042090416, 0.024551955983042717, -0.004286849405616522, -0.03845174238085747, -0.024551955983042717, 0.030657468363642693, 0.06469245254993439, 0.061574745923280716, -0.0010027006501331925, 0.0029553279746323824, -0.0036535649560391903, -0.016627779230475426, 0.008086556568741798, 0.011756359599530697, -0.01909596659243107, -0.017147397622466087, -0.000775367661844939, 0.0017049969173967838, -0.001729354029521346, -0.013769879937171936, -0.008443794213235378, -0.01279559638351202, 0.005943132098764181, -0.007307129912078381, 0.005618371069431305, 0.016627779230475426, -0.034294795244932175, 0.005683323368430138, -0.01792682521045208, -0.04442735016345978, 0.007826748304069042, -0.0038159454707056284, 0.002257091226056218, -0.012600739486515522, -0.018576348200440407, -0.020265106111764908, -0.019745487719774246, 0.002776709385216236, -0.02299310266971588, -0.013964736834168434, 0.05378047376871109, 0.00020094607316423208, 0.007274653762578964, -0.006105512846261263, 0.014484355226159096, -0.007307129912078381, 0.049363721162080765, 0.005715799517929554, -0.015263781882822514, 0.004384277854114771, -0.04676562920212746, -0.0017374730668962002, 0.028838805854320526, 0.037412505596876144, 0.0005805108812637627, 0.009872743859887123, -0.01675768382847309, 0.004871420096606016, -0.005066276527941227, -0.0013396404683589935, 0.0029878041241317987, -0.01987539231777191, 0.01026245765388012, -0.012470834888517857, 0.022863198071718216, -0.003523660358041525, 0.005618371069431305, -0.014484355226159096, -0.014419402927160263, -0.004319325555115938, -0.014484355226159096, -0.0015344972489401698, 0.0071122730150818825, -0.01961558498442173, -0.0035561365075409412, 0.011886264197528362, 0.025461288169026375, -0.004189420957118273, 0.017017493024468422, -0.024681860581040382, 0.005001324228942394, 0.02273329347372055, 0.029488328844308853, -0.012600739486515522, 0.01253578718751669, 0.007826748304069042, 0.05378047376871109, 0.005715799517929554, 0.02130434289574623, 0.04234887659549713, -0.013704927638173103, -0.015133878216147423, -0.021823961287736893, -0.007274653762578964, -0.01480911672115326, 0.004741515498608351, -0.006202941294759512, -0.032606035470962524, -0.0066251312382519245, 0.017407206818461418, -0.0281892828643322, -0.008151508867740631, -0.01363997533917427, -0.023123007267713547, -0.025980906561017036, -0.004108230583369732, -0.004709039349108934, 0.032865844666957855, 0.005943132098764181, 0.017017493024468422, 0.006722559221088886, 0.012925500981509686, -0.011366646736860275, -0.05118238553404808, -0.00513122882694006, -0.010587219148874283, -0.009028364904224873, -0.00017557409591972828, -0.03611345961689949, -0.005553418770432472, -0.0077942716889083385, 0.016367970034480095, 0.037152696400880814, -0.01675768382847309, -0.002581852488219738, -0.0019079727353528142, -0.02338281460106373, -0.03845174238085747, 0.0002334222081117332, 0.022083770483732224, -0.020265106111764908, -0.005520942620933056, -0.02844909206032753, 0.0075994147919118404, -0.02338281460106373, -0.04572639614343643, -0.03923116996884346, -0.016432922333478928, 0.004644087050110102, -0.019225871190428734, -0.013834832236170769, 0.03949097543954849, 0.009028364904224873, 0.003880897769704461, -0.003702279180288315, -0.005618371069431305, -0.001453306875191629, -0.04442735016345978, -0.004449230153113604, -0.0004810527025256306, -0.007242177613079548, 0.010002648457884789, -0.0038159454707056284, 0.013445118442177773, 0.0011934979120269418, -0.010067600756883621, 0.023512719199061394, 0.010717123746871948, 0.028838805854320526, -0.005163704976439476, -0.043647922575473785, -0.008313889615237713, 0.00896341260522604, 0.027150046080350876, -0.022343579679727554, 0.02559119276702404, 0.013185310177505016, 0.01961558498442173, -0.027799569070339203, 0.002760471310466528, -0.0012422120198607445, -0.017537111416459084, -0.01675768382847309, -0.021564152091741562, -0.04702543839812279, 0.010392362251877785, 0.004319325555115938, -0.00032273156102746725, -0.01844644360244274, 0.0016725208843126893, 0.004416754003614187, -0.010587219148874283, 0.03208642080426216, 0.014159593731164932, 0.055339328944683075, 0.004514182452112436, 0.007469510659575462, 0.015198829583823681, -8.169776992872357e-05, -0.02052491530776024, 0.014484355226159096, -0.00015832114149816334, -0.010717123746871948, 0.027409855276346207, 0.020395010709762573, -0.005618371069431305, 0.0007469510310329497, 0.0033937557600438595, -0.0014939020620658994, 0.0027442332357168198, 0.013510070741176605, -0.00015020211867522448, 0.043907731771469116, -0.01026245765388012, 0.046246014535427094, 0.002776709385216236, 0.001380235655233264, 0.03273594006896019, -0.024681860581040382, -0.009872743859887123, 0.012405882589519024, -0.034814413636922836, -0.009807792492210865, 0.0029390898998826742, -0.025721097365021706, 0.011171789839863777, -0.01363997533917427, 0.013445118442177773, -0.007339606061577797, -0.004384277854114771, -0.01182131189852953, 0.0008971531642600894, -0.010847028344869614, -0.005196181125938892, -0.0007225939771160483, 0.0028903759084641933, -0.025201478973031044, -0.0016968778800219297, 0.031177086755633354, -0.007924176752567291, -0.010132553055882454, 0.007501986809074879, -0.02390243299305439, -0.012470834888517857, -0.027150046080350876, 0.030007947236299515, 0.013250262476503849, 0.003442469984292984, -0.061055127531290054, 0.014744164422154427, 0.012730644084513187, -0.026370620355010033, -0.04442735016345978, -0.00048511222121305764, -0.07794272154569626, -0.07534462958574295, -0.03897136077284813, 0.01961558498442173, 0.025461288169026375, 0.032606035470962524, -0.016562826931476593, 0.022863198071718216, 0.03975078463554382, -0.020135201513767242, 0.022863198071718216, -0.008378841914236546, -0.0037509934045374393, 0.011561503633856773, -0.007014844566583633, 0.01961558498442173, 0.012340930290520191, 0.021564152091741562, 0.00032476132037118077, -0.04494696855545044, -0.013575023040175438, 0.016887588426470757, -0.002354519674554467, -0.0035074222832918167, -0.01844644360244274, 0.005196181125938892, -0.021823961287736893, -0.049103911966085434, -0.037152696400880814, 0.008768555708229542, 0.006592655088752508, 0.00704732071608305, -0.009288174100220203, -0.021434247493743896, -0.007631890941411257, 0.00448170630261302, -0.02221367508172989, 0.008703603409230709, -0.008638651110231876, -0.027539759874343872, 0.014614259824156761, -0.005228657275438309, 0.034554604440927505, -0.012860548682510853, -0.013380167074501514, -0.0004566956195048988, 0.02052491530776024, -0.0281892828643322, -0.005520942620933056, 0.023512719199061394, 0.007177225314080715, 0.03663307800889015, -0.0038159454707056284, 0.0096778878942132, -0.004676563199609518, 0.03221632167696953, 0.0048064677976071835, -0.0043518017046153545, -0.005163704976439476, 0.018316539004445076, 0.012146073393523693, -0.03351536765694618, 0.026370620355010033, -0.025721097365021706, -0.011886264197528362, -0.02559119276702404, -0.019225871190428734, -0.008703603409230709, 0.014939021319150925, 0.010197505354881287, 0.027799569070339203, 0.013315214775502682, 0.008508746512234211, 0.0038484216202050447, 0.012600739486515522, 0.00036535647814162076, 0.01766701601445675, 0.0049038962461054325, -0.0048389439471066, 0.03130699321627617, -0.034814413636922836, -0.015913305804133415, 0.0007997247739695013, -0.04156944900751114, -0.037932123988866806, 0.0007185344584286213, 0.022863198071718216, -0.025461288169026375, -0.00922322180122137, 0.03507422283291817, 0.043128304183483124, 0.005293609574437141, -0.006300369743257761, 0.010782076045870781, -0.016303017735481262, 0.03377517685294151, -0.046246014535427094, 0.0007104154210537672, -0.00896341260522604, 0.006755035370588303, -0.026630429551005363, -0.00021109485533088446, 0.005780751816928387, 0.018316539004445076, 0.012730644084513187, -0.03013785183429718, 0.01649787463247776, -0.008898460306227207, 0.011886264197528362, -0.021953865885734558, 0.006819987669587135, 0.0005845703999511898, 0.04260868579149246, 0.0017455921042710543, -0.004676563199609518, 0.024681860581040382, -0.006852463819086552, -0.012275977991521358, -0.05092257633805275, -0.04234887659549713, -0.013445118442177773, 0.013445118442177773, 0.021823961287736893, 0.008508746512234211, -0.022603388875722885, 0.0011366646504029632, 0.010976932942867279, 0.01182131189852953, -0.0037834695540368557, -0.014679212123155594, -0.019485680386424065, 0.006332845892757177, 0.0012503310572355986, -0.009028364904224873, 0.007859224453568459, -0.0008443794213235378, -0.016562826931476593, -0.026500524953007698, 0.0018917347770184278, -0.10600209981203079, -0.006495226640254259, 0.040530212223529816, -0.010911980643868446, -0.00824893731623888, -0.013964736834168434, 0.006560178939253092, 0.006787511520087719, -0.0014939020620658994, 0.019225871190428734, -0.040530212223529816, -0.013185310177505016, -0.03819193318486214, 0.027539759874343872, -0.004514182452112436, 0.013120357878506184, -0.003929612226784229, 0.004384277854114771, 0.0016156876226887107, 0.020914629101753235, 0.03819193318486214, 0.005098752677440643, 0.02416224218904972, 0.015523591078817844, -0.005423514172434807, 0.020914629101753235, 0.01961558498442173, 0.03377517685294151, -0.05481971055269241, 0.01987539231777191, -0.007989129051566124, 0.005033800378441811, 0.0058781797997653484, -0.02299310266971588, 0.004449230153113604, -0.0034749461337924004, 0.02987804263830185, -0.031696707010269165, -0.0049363719299435616, 0.015458638779819012, 0.006202941294759512, 0.020395010709762573, 0.01480911672115326, -0.011171789839863777, -0.012405882589519024, 0.024032337591052055, -0.0011691407999023795, -0.017537111416459084, -0.006365322042256594, 0.02221367508172989, -0.006235417444258928, 0.006852463819086552, -0.014159593731164932, -0.013380167074501514, 0.019745487719774246, -0.003442469984292984, -0.030267756432294846, 0.023252910003066063, 0.016562826931476593, 0.012016168795526028, -0.04832448437809944, 0.02844909206032753, 0.033125653862953186, -0.013380167074501514, 0.0003105530049651861, 0.011886264197528362, 0.018576348200440407, -0.05170200392603874, 0.00704732071608305, 0.017407206818461418, -0.0043518017046153545, 0.002484424039721489, -0.011431599035859108, 0.004091992508620024, -0.029488328844308853, 0.020005296915769577, 0.031436897814273834, 0.05715799331665039, 0.01987539231777191, -0.010327409952878952, 0.013380167074501514, -0.027669664472341537, 0.016627779230475426, -0.026240715757012367, -0.015328734181821346, -0.00513122882694006, 0.01987539231777191, -0.014419402927160263, -0.021564152091741562, 0.015458638779819012, -0.0034749461337924004, 0.01052226684987545, 0.005650847218930721, -0.03377517685294151, -0.0014370689168572426, 0.040010593831539154, 0.0021921389270573854, 0.03585365042090416, 0.0048064677976071835, 0.017796920612454414, -0.010782076045870781, -0.013445118442177773, -0.005910655949264765, 0.01182131189852953, 0.005553418770432472, 0.0009052722016349435, -0.02130434289574623, 0.04260868579149246, -0.010976932942867279, -0.007339606061577797, -0.004319325555115938, 0.0035723745822906494, 0.01279559638351202, 0.018706252798438072, 0.0033937557600438595, 0.006137988995760679, -0.03130699321627617, -0.016432922333478928, -0.030397659167647362, -0.0035561365075409412, 0.001388354692608118, 0.013834832236170769, -0.008086556568741798, -0.020914629101753235, 0.0006008084747008979, -0.013445118442177773, 0.007177225314080715, 0.018706252798438072, 0.012860548682510853, -0.015718448907136917, -0.019745487719774246, 0.0034099938347935677, 0.001729354029521346, -0.00401080260053277, 0.007566939108073711, -0.03611345961689949, 0.020005296915769577, -0.013964736834168434, -0.012925500981509686, -0.0032313752453774214, 0.022083770483732224, -0.01766701601445675, -0.006267893593758345, -0.03559384122490883, -0.004156944807618856, -0.008216461166739464, 0.005001324228942394, 0.03104718215763569, -0.003734755329787731, -0.027409855276346207, -0.008898460306227207, -0.0096778878942132, -0.0018430205527693033, 0.003085232572630048, 0.010132553055882454, -0.05455990135669708, -0.004773991648107767, 0.004514182452112436, -0.024811765179038048, -0.02559119276702404, -0.009937696158885956, -0.0420890673995018, 0.006300369743257761, 0.0019079727353528142, -0.006884939968585968, -0.029358424246311188, -0.0077942716889083385, -0.004968848079442978, -0.0028091855347156525, 0.0016238066600635648, -0.009028364904224873, -0.01766701601445675, 0.02416224218904972, -0.004676563199609518, -0.01123674213886261, -0.01279559638351202, -0.007274653762578964, 0.0353340320289135, 0.007372082211077213, -0.013769879937171936, 0.026370620355010033, 0.016367970034480095, 0.02130434289574623, -0.02390243299305439, 0.021823961287736893, -0.04598620533943176, -0.03299574926495552, -0.02702014148235321, -0.013704927638173103, 0.022083770483732224, 0.0021759008523076773, 0.006592655088752508, 0.01506892591714859, 0.005261133424937725, -0.016627779230475426, -0.017277302220463753, 0.007307129912078381, 0.003962088376283646, 0.02130434289574623, 0.0027929474599659443, -0.0049363719299435616, -0.01766701601445675, 0.019485680386424065, 0.015653496608138084, -0.03585365042090416, -0.02273329347372055, -0.061055127531290054, -0.020395010709762573, 0.0210445336997509, -0.01792682521045208, -0.0011853788746520877, 0.05767761170864105, -0.0017537111416459084, 0.003458708059042692, 0.024681860581040382, -0.031436897814273834, 0.010132553055882454, 0.010587219148874283, -0.01182131189852953, -0.023772528395056725, 0.0011691407999023795, -0.01123674213886261, 0.034554604440927505, 0.0006292250473052263, -0.0049363719299435616, -0.00031258276430889964, -0.020395010709762573, -0.0026305667124688625, 0.007566939108073711, 0.037152696400880814, 0.0140946414321661, 0.003426231909543276, 0.0043518017046153545, 0.03377517685294151, 0.027539759874343872, 0.020005296915769577, -0.02416224218904972, 0.02585100196301937, -0.0353340320289135, -0.0281892828643322, 0.02338281460106373, 0.008508746512234211, 0.0029878041241317987, -0.00922322180122137, 0.00704732071608305, 0.05663837492465973, -0.010002648457884789, 0.002663042861968279, -0.024292146787047386, 0.02844909206032753, -0.012016168795526028, -0.010067600756883621, -0.03325555846095085, -0.02727995067834854, 0.00704732071608305, -0.031436897814273834, -0.02961823344230652, 0.012275977991521358, -0.010132553055882454, -0.005423514172434807, -0.013185310177505016, 0.010002648457884789, -0.03351536765694618, -0.006884939968585968, 0.00922322180122137, 0.02870890125632286, 0.014744164422154427, 0.020005296915769577, 0.0053910380229353905, 0.03325555846095085, 0.022863198071718216, -0.0315668024122715, -0.012211025692522526, 0.03351536765694618, 0.012405882589519024, -0.0002029758325079456, -0.020265106111764908, -0.00639779819175601, 0.006105512846261263, 0.0036535649560391903, 0.009028364904224873, -0.02533138357102871, 0.015003973618149757, 0.020135201513767242, -0.012860548682510853, -0.0036698030307888985, -0.029748138040304184, 0.0003024339966941625, 0.022343579679727554, -0.024681860581040382, 0.012470834888517857, 0.02442205138504505, 0.005683323368430138, -0.021823961287736893, 0.013899784535169601, 0.022603388875722885, 0.010782076045870781, 0.02364262379705906, 0.03585365042090416, 0.007014844566583633, -0.029488328844308853, -0.034294795244932175, 0.005780751816928387, -0.037672314792871475, -0.02078472450375557, -0.004644087050110102, -0.003215137170627713, -0.013055405579507351, 0.012925500981509686, -0.0065277027897536755, -0.016108160838484764, 0.023512719199061394, 0.005780751816928387, -0.010002648457884789, 0.0025331382639706135, -0.01766701601445675, -0.00021109485533088446, -0.030657468363642693, 0.043128304183483124, -0.005423514172434807, 0.05144219473004341, -0.007339606061577797, 0.0013071643188595772, 0.008768555708229542, -0.01363997533917427, 0.004514182452112436, -0.006592655088752508, -0.007534462958574295, 0.00013193428458180279, -0.022863198071718216, 0.025721097365021706, 0.004514182452112436, 0.009742840193212032, -0.005650847218930721, -0.019745487719774246, -0.011561503633856773, 0.03949097543954849, 6.266879063332453e-05, -0.037152696400880814, 0.010132553055882454, -0.012730644084513187, -0.0029390898998826742, 0.0019648061133921146, 0.03637326881289482, 0.0387115515768528, -0.0026468047872185707, 0.0077942716889083385, 0.006690083537250757, 0.02585100196301937, -0.009547983296215534, 0.010976932942867279, -0.030267756432294846, -0.01675768382847309, -0.023772528395056725, 0.0021271866280585527, -0.010197505354881287, 0.02052491530776024, -0.018316539004445076, 0.017147397622466087, 0.004091992508620024, 0.010002648457884789, 0.012211025692522526, 0.005455990321934223, -0.007339606061577797, 0.024681860581040382, -0.02078472450375557, 0.017147397622466087, -0.008638651110231876, -0.018056729808449745, 0.005813227500766516, 0.016887588426470757, 0.012211025692522526, -0.0036048507317900658, 0.014484355226159096, -0.001217855024151504, -0.023772528395056725, 0.012211025692522526, -0.018056729808449745, -0.03377517685294151, 0.01026245765388012, -0.01363997533917427, -0.002257091226056218, 0.020914629101753235, -0.014939021319150925, -0.026370620355010033, -0.01182131189852953, 0.012860548682510853, 0.004871420096606016, -0.029098615050315857, 0.018316539004445076, 0.005553418770432472, 0.08885470032691956, -0.030007947236299515, 0.011041885241866112, 0.027539759874343872, 0.03689288720488548, 0.06910920888185501, 1.8902124793385155e-05, 0.013185310177505016, -0.005098752677440643, -0.012405882589519024, -0.05066276714205742, -0.01604321040213108, -0.030657468363642693, -0.020395010709762573, -0.005683323368430138, 0.0043518017046153545, 0.005261133424937725, 0.0014370689168572426, -0.05326085910201073, 0.009807792492210865, 0.014029689133167267, 0.017017493024468422, 0.007372082211077213, -0.006235417444258928, 0.005715799517929554, 0.017537111416459084, -0.0024032338988035917, 0.003994564525783062, 0.0032476133201271296, -0.0021921389270573854, 0.003020280273631215, 0.052741240710020065, -0.00704732071608305, -0.010327409952878952, -0.010587219148874283, -0.003621088806539774, 0.00017861873493529856, 0.006267893593758345, -0.022863198071718216, -0.026500524953007698, 0.025980906561017036, 0.019745487719774246, -0.0029715660493820906, 0.004611610900610685, -0.000430308748036623, 0.004156944807618856, -0.014159593731164932, 0.015198829583823681, -0.03663307800889015, 0.014224546030163765, 0.011171789839863777, 0.015978258103132248, 0.011106837540864944, 0.009418078698217869, 0.009872743859887123, 0.019745487719774246, -0.026890236884355545, -0.0066251312382519245, -0.03559384122490883, -0.008086556568741798, -0.024681860581040382, 0.008703603409230709, -0.0210445336997509, -0.0488441027700901, -0.00922322180122137, -0.015978258103132248, 0.009158269502222538, -0.01792682521045208, -0.014939021319150925, 0.03611345961689949, 0.008833508007228374, -0.024941669777035713, -0.027539759874343872, 0.03104718215763569, 0.005358561873435974, 0.0023058054503053427, 0.01987539231777191, -0.05715799331665039, 0.00513122882694006, 0.008443794213235378, 0.019485680386424065, -0.0030527564231306314, -0.014939021319150925, -0.009288174100220203, 0.0022895673755556345, -0.006787511520087719, -0.009872743859887123, -0.0017699492163956165, 0.0011610217625275254, -0.0040757544338703156, 0.0037834695540368557, -3.425217073527165e-05, 0.05715799331665039, 0.007372082211077213, 0.017017493024468422, 0.03663307800889015, -0.0011610217625275254, 0.019485680386424065, 0.024681860581040382, -0.017017493024468422, 0.01649787463247776, -0.02559119276702404, -0.001453306875191629, 0.005715799517929554, -0.0017374730668962002, -0.005066276527941227, 0.0039458503015339375, 0.031436897814273834, -0.0140946414321661, -0.015458638779819012, 0.01253578718751669, -0.020005296915769577, 0.01480911672115326, 0.007177225314080715, -0.02533138357102871, 0.005163704976439476, -0.03104718215763569, -0.012275977991521358, 0.01604321040213108, -0.0018998536979779601, 0.010587219148874283, -0.0193557757884264, -0.006657607387751341, -0.012340930290520191, 0.011756359599530697, 0.014744164422154427, 0.015523591078817844, 0.07170730084180832, 0.0014451879542320967, -0.03663307800889015, -0.012470834888517857, 0.02247348427772522, -0.03013785183429718, -0.0003876838309224695, 0.002598090562969446, 0.004579134751111269, -0.008508746512234211, 0.013575023040175438, -0.014939021319150925, 0.003117708722129464, 0.0029553279746323824, -0.00704732071608305, -0.0014289498794823885, 0.012146073393523693, 0.010782076045870781, -0.02052491530776024, -0.01182131189852953, 0.005683323368430138, -0.015198829583823681, -0.0016644018469378352, 0.016108160838484764, 0.01279559638351202, -0.00513122882694006, 0.008508746512234211, -0.012925500981509686, 0.03663307800889015, -0.0005926894373260438, 0.034554604440927505, -0.005455990321934223, -0.007534462958574295, -0.007177225314080715, -0.008151508867740631, 0.025201478973031044, -0.01818663440644741, 0.02987804263830185, -0.007956652902066708, 0.021174438297748566, -0.026630429551005363, 0.021434247493743896, -0.004709039349108934, 0.008054080419242382, 4.6684439439559355e-05, -0.012600739486515522, 0.004871420096606016, -0.0454665869474411, 0.009937696158885956, -0.02078472450375557, -0.012340930290520191, 0.003978326451033354, 0.003994564525783062, 0.008054080419242382, -0.0210445336997509, -0.01792682521045208, 0.010847028344869614, 0.007307129912078381, 0.00029837447800673544, -0.007631890941411257, 0.043128304183483124, -0.01792682521045208, -0.024681860581040382, 0.026240715757012367, -0.018056729808449745, -0.018966061994433403, 0.0014776639873161912, 0.00604056054726243, 0.021823961287736893, -0.007924176752567291, -0.020135201513767242, 0.04728524759411812, 0.003085232572630048, 0.03559384122490883, -0.0065277027897536755, 0.0005683323252014816, -0.017407206818461418, -0.0140946414321661, -0.009158269502222538, 0.0008890341268852353, 0.0034099938347935677, 0.007372082211077213, -0.0036535649560391903, 0.0075994147919118404, 0.015718448907136917, -0.011171789839863777, -0.009742840193212032, -0.020005296915769577, 0.008443794213235378, 0.00013497892359737307, -0.018316539004445076, 0.011041885241866112, -0.04494696855545044, 0.007826748304069042, 0.004027040209621191, -0.005553418770432472, -0.015458638779819012, 0.014159593731164932, -0.02870890125632286, -0.02364262379705906, -0.008443794213235378, -0.02390243299305439, -0.040790021419525146, 0.01766701601445675, -0.008508746512234211, 0.000771308143157512, 0.002435710048303008, -0.0353340320289135, 0.04260868579149246, -0.00015121699834708124, -0.02559119276702404, 0.024292146787047386, 0.00740455836057663, -0.012600739486515522, -0.0034911842085421085, -0.008898460306227207, 0.03585365042090416, -0.009158269502222538, -0.007177225314080715, -0.011301694437861443, 0.003929612226784229, -0.002906613750383258, -0.012275977991521358, -0.007859224453568459, -0.003880897769704461, -0.009742840193212032, -0.017407206818461418, 0.008054080419242382, -0.024941669777035713, 0.009288174100220203, 0.016303017735481262, 0.0059756082482635975, -0.0077942716889083385, 0.029488328844308853, 0.0027117570862174034, 0.02844909206032753, 0.006462750490754843, -0.006495226640254259, -0.00604056054726243, -0.020914629101753235, -0.012211025692522526, -0.016887588426470757, 0.008703603409230709, -0.004871420096606016, -0.012860548682510853, 0.002070353366434574, 0.023252910003066063, 0.0032476133201271296, 0.012275977991521358, 0.020265106111764908, -0.01279559638351202, 0.029098615050315857, -0.010911980643868446, 0.03819193318486214, 0.007761795539408922, 0.0007631891057826579, 0.018836157396435738, 0.015198829583823681, -0.013055405579507351, 0.004286849405616522, 0.015198829583823681, 0.020654819905757904, -0.024032337591052055, 0.033125653862953186, -0.017147397622466087, -0.0024194719735533, -0.01766701601445675, 0.025980906561017036, -0.02390243299305439, 0.028059378266334534, 0.02078472450375557, 0.020654819905757904, -0.05040295794606209, -0.0036048507317900658, 0.018576348200440407, 0.013185310177505016, 0.0014127118047326803, 0.0016968778800219297, 0.005943132098764181, 0.01675768382847309, -0.00574827566742897, 0.030917277559638023, 0.010717123746871948, 0.00401080260053277, -0.0031339467968791723, -0.014289498329162598, -0.006300369743257761, 0.00256561441347003, -0.025721097365021706, -0.0025493763387203217, -0.0019648061133921146, -0.0096778878942132, -0.017277302220463753, -0.015913305804133415, 0.010392362251877785, -0.0048064677976071835, -0.012340930290520191, 0.015653496608138084, 0.017796920612454414, 0.03819193318486214, -0.001542616286315024, -0.03897136077284813, 0.020914629101753235, -0.006722559221088886, 0.037152696400880814, 0.0032313752453774214, -0.031956516206264496, 0.006949892267584801, 0.00896341260522604, -0.0017618301790207624, -0.005553418770432472, 0.002078472403809428, 0.02727995067834854, -0.015328734181821346, -0.005845703650265932, -0.009028364904224873, 0.007014844566583633, -0.007924176752567291, -0.015458638779819012, -0.02338281460106373, 0.006722559221088886, -0.007956652902066708, -0.011561503633856773, -0.03325555846095085, 0.003929612226784229, -0.032606035470962524, -0.007469510659575462, 0.05014314875006676, 0.002054115291684866, 0.01844644360244274, -0.0210445336997509, 0.049883339554071426, 0.005423514172434807, -0.009093317203223705, 0.013510070741176605, 0.009937696158885956, -0.027669664472341537, 0.017017493024468422, 0.01844644360244274, -0.014614259824156761, 0.015978258103132248, 0.002760471310466528, -0.049103911966085434, -0.01792682521045208, -0.011301694437861443, -0.004709039349108934, -0.02442205138504505, -0.027669664472341537, -0.005098752677440643, 0.004027040209621191, -0.00604056054726243, -0.014874069020152092, -0.028578996658325195, 0.02130434289574623, 0.00704732071608305, -0.00704732071608305, -0.01649787463247776, 0.003182661021128297, -0.02299310266971588, -0.009937696158885956, 0.009353126399219036, 0.01578340120613575, 0.006202941294759512, 0.00448170630261302, -0.007924176752567291, 0.009872743859887123, 0.032865844666957855, 0.025980906561017036, 0.012211025692522526, 0.010652171447873116, -0.0027442332357168198, -0.005618371069431305, -0.00604056054726243, -0.020395010709762573, -0.0281892828643322, -0.007501986809074879, 0.01675768382847309, 0.0026305667124688625, -0.009093317203223705, 0.006560178939253092, 0.015523591078817844, 0.01363997533917427, 0.015653496608138084, -0.014224546030163765, -0.02299310266971588, -0.026240715757012367, 0.009483030997216702, 0.010587219148874283, -0.015588543377816677, 0.0008403199026361108, -0.008086556568741798, -0.00802160520106554, 0.014549307525157928, -0.003913374152034521, -0.008703603409230709, 0.013575023040175438, -0.0315668024122715, -8.119033009279519e-05, -0.01766701601445675, -0.013575023040175438, 0.015718448907136917, -0.03377517685294151, -0.021694056689739227, 0.027669664472341537, 0.026500524953007698, -0.0012259740615263581, 0.010652171447873116, -0.02247348427772522, -0.01026245765388012, 0.03845174238085747, -0.015978258103132248, -0.037412505596876144, 0.00574827566742897, -0.006300369743257761, -0.005066276527941227, -0.02585100196301937, -0.001035176683217287, -0.011301694437861443, 0.01844644360244274, 0.0004810527025256306, 0.024551955983042717, -0.020395010709762573, -0.016303017735481262, 0.006332845892757177, -0.00011924829595955089, -0.03377517685294151, 0.02052491530776024, -0.04182925820350647, 0.02961823344230652, 0.016627779230475426, -0.019485680386424065, 0.003458708059042692, 0.006722559221088886, -0.032346226274967194, -0.0037834695540368557, 0.009612935595214367, 0.01623806543648243, -0.010002648457884789, 0.002224615076556802, -0.030787372961640358, -0.008508746512234211, 0.004773991648107767, -0.013964736834168434, 0.02702014148235321, -0.001453306875191629, -0.019745487719774246, 0.0017537111416459084, -0.034034986048936844, -0.020395010709762573, -0.02078472450375557, 0.03130699321627617, -0.015523591078817844, -0.0281892828643322, 0.017537111416459084, -0.01844644360244274, 0.009028364904224873, -0.016887588426470757, -0.010782076045870781, 0.03130699321627617, 0.011561503633856773, 0.007469510659575462, -0.003637326881289482, -0.03689288720488548, -0.00018775263743009418, 0.003101470647379756, 0.03377517685294151, 0.017277302220463753, 0.001217855024151504, -0.027150046080350876, 0.015848353505134583, -0.011106837540864944, -0.009093317203223705, -0.011951216496527195, -0.003864659694954753, 0.012016168795526028, 0.022343579679727554, 0.022863198071718216, 0.013899784535169601, 0.01052226684987545, -0.009158269502222538, 0.0025493763387203217, -0.001558854361064732, 0.007274653762578964, -0.017407206818461418, -0.005780751816928387, -0.0037509934045374393, 0.002143424702808261, -0.018836157396435738, 0.007989129051566124, -0.012990453280508518, 0.002005401300266385, 0.012211025692522526, -0.023252910003066063, 0.014549307525157928, -0.020914629101753235, -0.005326085723936558, 0.032346226274967194, 0.006852463819086552, -0.01578340120613575, -0.0012259740615263581, -0.010197505354881287, -0.019225871190428734, -0.021434247493743896, 0.0031664229463785887, -0.0077942716889083385, -0.011366646736860275, 0.0140946414321661, 0.01363997533917427, -0.028578996658325195, 0.0060730366967618465, 0.005066276527941227, 0.018576348200440407, -0.013380167074501514, 0.013120357878506184, -0.0048389439471066, 0.0013964737299829721, 0.01182131189852953, -0.040010593831539154, 0.0018917347770184278, -0.005813227500766516, -0.009353126399219036, 0.015328734181821346, 0.01208112109452486, -0.010002648457884789, -0.016432922333478928, 0.013380167074501514, 0.02390243299305439, 0.009093317203223705, 0.029098615050315857, 0.01792682521045208, -0.021174438297748566, -0.023772528395056725, 0.01909596659243107, 0.013380167074501514, 0.009483030997216702, -0.013769879937171936, -0.009353126399219036, -0.0077942716889083385, 0.005293609574437141, -0.040270403027534485, -0.012275977991521358, -0.0018754967022687197, 0.02987804263830185, 0.009937696158885956, -0.005423514172434807, -0.01909596659243107, 0.007761795539408922, -0.005163704976439476, 0.02792947366833687, 0.015133878216147423, 0.005650847218930721, -0.007566939108073711, -0.005098752677440643, -0.007761795539408922, 0.005780751816928387, -0.007924176752567291, 0.01182131189852953, 0.013445118442177773, 0.02702014148235321, 0.023512719199061394, 0.02130434289574623, -0.003296327544376254, -0.01604321040213108, -0.018706252798438072, -0.005326085723936558, -0.025461288169026375, -0.02533138357102871, 0.012730644084513187, -0.009158269502222538, 0.004871420096606016, -0.0033450417686253786, 0.009158269502222538, -0.00896341260522604, 0.02390243299305439, -0.007274653762578964, -0.0034749461337924004, -0.009807792492210865, -0.0036535649560391903, -0.010327409952878952, -0.0033450417686253786, 0.009028364904224873, -0.015133878216147423, 0.030657468363642693, 0.004043278284370899, -0.02507157437503338, 0.0024681859649717808, 0.03351536765694618, -0.034034986048936844, -0.009353126399219036, -0.022603388875722885, -0.017537111416459084, -0.023252910003066063, 0.005943132098764181, -0.012405882589519024, 0.0026305667124688625, -0.009158269502222538, -0.0005967489560134709, -0.008313889615237713, 0.006267893593758345, -0.029358424246311188, -0.005618371069431305, -0.020914629101753235, 0.01675768382847309, 0.0193557757884264, -0.01506892591714859, -0.006170465145260096, -0.03130699321627617, -0.01279559638351202, 0.0017780682537704706, 0.014939021319150925, 0.019745487719774246, 0.018836157396435738, 0.017277302220463753, -0.027409855276346207, 0.021823961287736893, -0.015003973618149757, 0.046505820006132126, 0.021953865885734558, -0.0210445336997509, -0.006267893593758345, -0.005358561873435974, -0.018576348200440407, 0.020005296915769577, 0.021953865885734558, -0.020135201513767242, -0.009742840193212032, -0.014744164422154427, 0.009483030997216702, 0.024551955983042717, -0.02676033414900303, 0.05066276714205742, -0.00639779819175601, 0.014679212123155594, 0.005066276527941227, 0.02247348427772522, 0.006755035370588303, -0.006170465145260096, 0.009872743859887123, 0.024292146787047386, 0.0012746881693601608, 0.005358561873435974, 0.005066276527941227, -0.013380167074501514, -0.023512719199061394, 0.010911980643868446, 0.03130699321627617, 0.010782076045870781, -0.018056729808449745, 0.015848353505134583, 0.016367970034480095, -0.011951216496527195, 0.024032337591052055, 0.010782076045870781, 0.01818663440644741, 0.02247348427772522, -0.006235417444258928, -0.016432922333478928, 0.030917277559638023, -0.016887588426470757, -0.0009986411314457655, 0.015328734181821346, 0.02702014148235321, -0.003280089469626546, 0.013964736834168434, 0.009353126399219036, 0.013510070741176605, 0.00639779819175601, -0.010847028344869614, 0.0037834695540368557, -0.008573698811233044, 0.01052226684987545, 0.013250262476503849, -0.019485680386424065, 0.0021921389270573854, 0.018706252798438072, 0.03975078463554382, -0.0034749461337924004, 0.03507422283291817, 0.020395010709762573, 0.023772528395056725, 0.011431599035859108, 0.0003876838309224695, -0.004579134751111269, 0.002841661684215069, -0.024032337591052055, 0.017147397622466087, 0.0017861872911453247, -0.021694056689739227, -0.009937696158885956, 0.007631890941411257, -0.0008119033300317824, 0.003117708722129464, -0.01766701601445675, 0.012405882589519024, 0.006755035370588303, 0.012211025692522526, -0.029488328844308853, 0.008313889615237713, 0.005520942620933056, 0.005326085723936558, -0.0193557757884264, 0.0003470886731520295, 0.008898460306227207, -0.007501986809074879, 0.011756359599530697, 0.002070353366434574, 0.005033800378441811, 0.013445118442177773, 0.0031339467968791723, 0.027409855276346207, 0.00896341260522604, -0.0315668024122715, 0.011886264197528362, 0.0035074222832918167, 0.015848353505134583, -0.0053910380229353905, -0.014874069020152092, -0.02585100196301937, 0.01961558498442173, 0.03637326881289482, 0.010197505354881287, 0.03221632167696953, -0.01435445062816143, -0.015653496608138084, 0.01149655133485794, 0.013055405579507351, -0.03325555846095085, 0.004611610900610685, -0.01792682521045208, 0.004108230583369732, -0.004140706732869148, 0.003864659694954753, 0.0004830824618693441, 0.00412446865811944, -0.0003470886731520295, 0.00036332671879790723, 0.0036048507317900658, 0.012470834888517857, -0.023252910003066063, 0.03507422283291817, -0.0007388319936580956, -0.004546658601611853, 0.009937696158885956, -0.025980906561017036, -0.01766701601445675, -0.02896871045231819, -0.01480911672115326, 0.030787372961640358, 0.005845703650265932, 0.010652171447873116, 0.002159662777557969, -0.019745487719774246, 0.01279559638351202, 0.0033125656191259623, 0.0060730366967618465, 0.011626455001533031, -0.026890236884355545, -0.011561503633856773, -0.01792682521045208, 0.018706252798438072, -0.008638651110231876, -0.004871420096606016, 0.024681860581040382, 0.001729354029521346, 0.031177086755633354, -0.019485680386424065, -0.017407206818461418, -0.009547983296215534, 0.018316539004445076, 0.006592655088752508, 0.005455990321934223, -0.011626455001533031, 0.043128304183483124, 0.02987804263830185, 0.002257091226056218, -0.024292146787047386, -0.0015101401368156075, -0.010587219148874283, 0.008054080419242382, -0.004871420096606016, -0.028838805854320526, -0.0031664229463785887, -0.010652171447873116, -0.008313889615237713, 0.023772528395056725, 0.018056729808449745, -0.024032337591052055, 0.011951216496527195, -0.034554604440927505, -0.00824893731623888, 0.007956652902066708, 0.021564152091741562, -0.0016075685853138566, -0.004676563199609518, -0.005033800378441811, 0.02442205138504505, 0.021953865885734558, -0.015653496608138084, -0.027799569070339203, 0.024032337591052055, -0.043907731771469116, -0.014484355226159096, -0.01480911672115326, -0.03182661160826683, -0.009158269502222538, 0.02247348427772522, 0.028059378266334534, -0.028319187462329865, 0.011691407300531864, -0.0059756082482635975, -0.006430274341255426, 0.005423514172434807, -0.0039458503015339375, -0.018316539004445076, -0.022863198071718216, 0.020395010709762573, 0.011431599035859108, -0.009742840193212032, 0.0193557757884264, -0.019485680386424065, -0.006690083537250757, -0.0005602132878266275, -0.04234887659549713, -0.011886264197528362, 0.026370620355010033, -0.031177086755633354, 0.016562826931476593, 0.005618371069431305, -0.024681860581040382, -0.015328734181821346, -0.022603388875722885, 0.021564152091741562, -0.00922322180122137, 0.002070353366434574, -0.017407206818461418, 0.0038159454707056284, 0.030527563765645027, 0.010067600756883621, 0.00120973598677665, -0.010327409952878952, -0.021953865885734558, 0.009028364904224873, 0.018576348200440407, 0.014874069020152092, -0.058976657688617706, 0.0193557757884264, 0.0026955190114676952, 2.9812073989887722e-05, 0.03104718215763569, -0.0033288036938756704, 0.02533138357102871, 0.043907731771469116, 0.008768555708229542, 0.014289498329162598, 0.014549307525157928, -0.04286849498748779, -0.018316539004445076, -0.012340930290520191, 0.008638651110231876, 0.01253578718751669, -0.0071122730150818825, 0.005553418770432472, -0.02247348427772522, 0.017407206818461418, -0.012275977991521358, 0.0031339467968791723, 0.008638651110231876, 0.0075994147919118404, 0.015328734181821346, 0.013834832236170769, 0.007729319389909506, -0.0021921389270573854, 0.006560178939253092, 0.04858429357409477, -0.01279559638351202, -0.010976932942867279, -0.003523660358041525, 0.005098752677440643, 0.01026245765388012, 0.016303017735481262, -0.010002648457884789, 0.03377517685294151, 0.03559384122490883, -0.010717123746871948, -0.005033800378441811, -0.013575023040175438, 0.001380235655233264, -0.02585100196301937, -0.0096778878942132, -0.0025169001892209053, -0.011301694437861443, -0.002338281599804759, -0.01961558498442173, 0.018966061994433403, 0.027539759874343872, 0.02273329347372055, 0.027150046080350876, -0.0037672314792871475, -0.018056729808449745, 0.020654819905757904, -0.022343579679727554, -0.005423514172434807, -0.0005764513625763357, -0.0016238066600635648, 0.010976932942867279, 0.016627779230475426, 0.0029878041241317987, 0.024032337591052055, -0.012340930290520191, 0.005845703650265932, 0.019225871190428734, 0.021953865885734558, 0.005650847218930721, 0.0420890673995018, 0.011041885241866112, -0.03325555846095085, 0.00028822568128816783, 0.024292146787047386, -0.03507422283291817, 0.02727995067834854, -0.0040757544338703156, 0.009872743859887123, -0.0140946414321661, -0.021694056689739227, 0.01480911672115326, 0.009288174100220203, 0.031696707010269165, 0.021174438297748566, -0.006137988995760679, -0.0033450417686253786, -0.006365322042256594, -0.015198829583823681, 0.016627779230475426, 0.010327409952878952, -0.033125653862953186, -0.0019079727353528142, -0.0036860411055386066, -0.002435710048303008, 0.005845703650265932, 0.028319187462329865, 0.011301694437861443, -0.013964736834168434, -0.005585894919931889, -0.008443794213235378, -0.02416224218904972, -0.016562826931476593, 0.0025331382639706135, -0.005780751816928387, -0.0011529027251526713, 0.0140946414321661, -0.020914629101753235, 0.0001370086829410866, -0.010002648457884789, 0.012211025692522526, -0.034814413636922836, -0.034554604440927505, 0.015913305804133415, -0.010847028344869614, 0.017407206818461418, -0.007372082211077213, 0.004741515498608351, -0.010392362251877785, 0.01052226684987545, -0.009807792492210865, -0.017277302220463753, 0.021823961287736893, -0.005845703650265932, 0.01253578718751669, -0.02273329347372055, -0.0021271866280585527, -0.00513122882694006, 0.001453306875191629, -0.012665691785514355, -0.0016968778800219297, -0.002224615076556802, 0.005618371069431305, -0.020005296915769577, -0.0005926894373260438, -0.01480911672115326, -0.0009905220940709114, 0.007859224453568459, 0.005553418770432472, -0.016627779230475426, -0.023512719199061394, 0.011171789839863777, 0.028578996658325195, 0.013834832236170769, -0.014939021319150925, 0.0016238066600635648, -0.005780751816928387, -0.026630429551005363, 0.007989129051566124, 0.0016238066600635648, -0.03221632167696953, -0.0011853788746520877, -0.003962088376283646, -0.003978326451033354, 0.02221367508172989, 0.01818663440644741, 0.00896341260522604, 0.013120357878506184, -0.01987539231777191, 0.008833508007228374, 0.00224085315130651, 0.02338281460106373, 0.05404028296470642, 0.016887588426470757, -0.013380167074501514, 0.013704927638173103, 0.030267756432294846, 0.016367970034480095, -0.0210445336997509, -0.0026143286377191544, 0.03585365042090416, -0.0033937557600438595, 0.004871420096606016, 0.019745487719774246, -0.03013785183429718, 0.0193557757884264, -0.0024681859649717808, -0.023252910003066063, 0.007437034510076046, -0.02870890125632286, 0.0014776639873161912, -0.032865844666957855, 0.02390243299305439, 0.014874069020152092, -0.0005683323252014816, -0.008216461166739464, -0.020914629101753235, -0.01026245765388012, -0.021694056689739227, 0.00401080260053277, 0.0038484216202050447, 0.02987804263830185, -0.015393686480820179, -0.022083770483732224, 0.027539759874343872, -0.0019079727353528142, 0.032606035470962524, 0.0193557757884264, 0.00824893731623888, -0.015198829583823681, 0.018316539004445076, 0.023772528395056725, -0.003198899095878005, 0.014224546030163765, 0.013769879937171936, 0.0019404488848522305, -0.02416224218904972, -0.01052226684987545, 0.007274653762578964, -0.008638651110231876, -0.007501986809074879, -0.008443794213235378, 0.0033937557600438595, -0.007469510659575462, 0.030527563765645027, -0.00256561441347003, 0.009937696158885956, 0.0066251312382519245, 0.014029689133167267, 0.004156944807618856, 0.014419402927160263, -0.012470834888517857, -0.005553418770432472, -0.014939021319150925, 0.008508746512234211, 0.0024681859649717808, -0.02792947366833687, 0.02896871045231819, 0.006267893593758345, -0.021953865885734558, -0.022083770483732224, -0.028059378266334534, 0.0018836157396435738, 0.013964736834168434, -0.0018349015153944492, 0.012860548682510853, -0.01961558498442173, -0.012730644084513187, 0.019225871190428734, 0.018576348200440407, -0.01279559638351202, -0.03507422283291817, -0.03949097543954849, -0.0005033800262026489, -0.019485680386424065, 0.006365322042256594, -0.04702543839812279, 0.012146073393523693, -0.01123674213886261, -0.01766701601445675, -0.0031664229463785887, 0.0005439752130769193, -0.012600739486515522, -0.006592655088752508, 0.02130434289574623, 0.002143424702808261, -0.0007591295870952308, -0.025461288169026375, -0.04156944900751114, 0.029488328844308853, 0.0054884664714336395, 0.004676563199609518, -0.0005926894373260438, 0.006819987669587135, 0.012925500981509686, -0.000694177346304059, -0.02078472450375557, 0.0006292250473052263, 0.02442205138504505, -0.0004221897106617689, -0.024941669777035713, -0.014484355226159096, 0.0021271866280585527, 0.02416224218904972, -0.002598090562969446, 0.04598620533943176, 0.02507157437503338, -0.019745487719774246, -0.020265106111764908, -0.00922322180122137, 0.02792947366833687, 0.03013785183429718, -0.007339606061577797, 0.0076968432404100895, -0.043388113379478455, 0.014419402927160263, -0.02078472450375557, -0.0420890673995018, -0.02442205138504505, -0.014874069020152092, -0.043647922575473785, 0.02130434289574623, -0.03299574926495552, -0.03819193318486214, 0.017017493024468422, 0.018836157396435738, 0.031956516206264496, -0.003004042198881507, -0.010587219148874283, 0.01604321040213108, -0.0053910380229353905, -0.023772528395056725, -0.0002253031707368791, -0.012340930290520191, -0.011561503633856773, 0.022603388875722885, -0.02338281460106373, 0.004449230153113604, -0.01253578718751669, -0.010976932942867279, -0.0006860583089292049, -0.027539759874343872, 0.011041885241866112, 0.020654819905757904, -0.011041885241866112, -0.0454665869474411, -0.02052491530776024, 0.03273594006896019, -0.01649787463247776, -0.014874069020152092, 0.00896341260522604, -0.004140706732869148, 0.030527563765645027, -0.026890236884355545, -0.037412505596876144, 0.02507157437503338, 0.02130434289574623, 0.004416754003614187, 0.003020280273631215, 0.004709039349108934, 0.028578996658325195, 0.009028364904224873, -0.013380167074501514, 0.004741515498608351, 0.0028903759084641933, 0.0140946414321661, 0.014289498329162598, -0.024292146787047386, 0.023123007267713547, -0.02585100196301937, 0.013899784535169601, 0.014159593731164932, -0.024941669777035713, 0.006365322042256594, -0.009612935595214367, -0.00639779819175601, -0.004676563199609518, 0.010782076045870781, 0.0020947104785591364, -0.019485680386424065, -0.010782076045870781, -0.024292146787047386, -0.0016075685853138566, -0.015458638779819012, -0.01766701601445675, 0.009028364904224873, 0.020654819905757904, -0.007501986809074879, -0.004221897106617689, 0.008443794213235378, 0.013120357878506184, 0.0018836157396435738, 0.018056729808449745, -0.012016168795526028, 0.005520942620933056, -0.015198829583823681, 0.009807792492210865, 0.006657607387751341, -0.013120357878506184, -0.013445118442177773, 0.021564152091741562, -0.011366646736860275, -0.02844909206032753, -0.006852463819086552, 0.013445118442177773, 0.003182661021128297, -0.026110811159014702, 0.002354519674554467, -0.02338281460106373, 0.01253578718751669, 0.02338281460106373, 0.040270403027534485, -0.004514182452112436, 0.0011041885009035468, 0.012146073393523693, 0.017277302220463753, 0.01909596659243107, -0.006495226640254259, 0.040270403027534485, -0.05170200392603874, -0.007501986809074879, -0.017407206818461418, 0.006105512846261263, 0.01604321040213108, -0.02247348427772522, -0.00051555858226493, -0.0007185344584286213, 0.008703603409230709, 0.010392362251877785, 0.001035176683217287, -0.0037509934045374393, -0.01253578718751669, 0.0038484216202050447, -0.012146073393523693, -0.0004282789886929095, 0.01818663440644741, 0.01623806543648243, -0.005455990321934223, -0.043128304183483124, 0.009288174100220203, -0.006592655088752508, 0.0048389439471066, -0.008281413465738297, 0.02676033414900303, -0.0353340320289135, 0.012405882589519024, 0.011886264197528362, -0.01675768382847309, 0.0193557757884264, 0.004449230153113604, -0.0210445336997509, 0.005261133424937725, -0.009807792492210865, 0.009547983296215534, 0.0015832114731892943, 0.034554604440927505, 0.0038484216202050447, 0.006690083537250757, -0.003280089469626546, 0.006137988995760679, 0.01961558498442173, -0.0008890341268852353, -0.0054884664714336395, 0.023252910003066063, -0.007437034510076046, 0.024811765179038048, 0.026500524953007698, -0.005261133424937725, -0.015848353505134583, 0.020654819905757904, 0.01208112109452486, -0.005098752677440643, -0.00896341260522604, 0.012990453280508518, 0.00224085315130651, 0.015393686480820179, -0.04702543839812279, 0.0009215102763846517, -0.026370620355010033, -0.015198829583823681, -0.030397659167647362, -0.016108160838484764, 0.02702014148235321, -0.013250262476503849, -0.006430274341255426, 0.009288174100220203, -0.0019485679222270846, -0.0007631891057826579, 0.006722559221088886, 0.00032273156102746725, 0.019745487719774246, -0.032865844666957855, 0.028578996658325195, -0.01844644360244274, -0.02078472450375557, 0.014939021319150925, 0.010976932942867279, 0.020395010709762573, 0.014419402927160263, 0.00604056054726243, -0.027669664472341537, 0.03689288720488548, 0.0020216391421854496, 0.010911980643868446, 0.0027117570862174034, 0.022083770483732224, 0.012016168795526028, -0.026500524953007698, 0.0140946414321661, -0.020135201513767242, 0.012860548682510853, -0.016432922333478928, 0.034294795244932175, -0.031956516206264496, -0.01818663440644741, 0.01363997533917427, -0.028319187462329865, -0.004871420096606016, 0.015198829583823681, -0.008573698811233044, -0.011301694437861443, -0.0019079727353528142, 0.040790021419525146, -0.03299574926495552, 0.014289498329162598, 0.0018267824780195951, -0.011756359599530697, 0.005650847218930721, 0.02130434289574623, 0.013315214775502682, -0.008768555708229542, 0.03585365042090416, 0.0021271866280585527, 0.005326085723936558, 0.002663042861968279, 0.01675768382847309, 0.0193557757884264, -0.006819987669587135, -0.00740455836057663, 0.004514182452112436, -0.01961558498442173, 0.01026245765388012, 4.5415839849738404e-05, -0.007501986809074879, 0.026370620355010033, -0.008573698811233044, 0.017017493024468422, -0.018056729808449745, -0.006949892267584801, -0.019745487719774246, -0.005196181125938892, -0.01818663440644741, -0.007729319389909506, -0.0024194719735533, 0.018576348200440407, -0.01844644360244274, -0.004156944807618856, -0.011886264197528362, 0.007014844566583633, -0.02442205138504505, -0.013380167074501514, -0.019745487719774246, -0.000385654071578756, 0.01149655133485794, 0.02961823344230652, -0.020914629101753235, 0.013834832236170769, 0.040270403027534485, -0.009158269502222538, -0.018576348200440407, -0.013120357878506184, 0.033125653862953186, -0.0026143286377191544, -0.019485680386424065, 0.009483030997216702, -0.008054080419242382, -0.02676033414900303, -0.019745487719774246, -0.012990453280508518, -0.0053910380229353905, -0.01818663440644741, -0.010457314550876617, 0.008833508007228374, -0.008508746512234211, -0.02078472450375557, -0.018836157396435738, -0.0060730366967618465, 0.011626455001533031, 0.002776709385216236, -0.0013234023936092854, -0.0005723918438889086, 0.008508746512234211, 0.003182661021128297, -0.015328734181821346, -0.027669664472341537, -0.010457314550876617, 0.0035561365075409412, 0.010067600756883621, 0.017017493024468422, 0.007859224453568459, 0.01578340120613575, 0.004189420957118273, -0.006170465145260096, 0.005196181125938892, -0.025721097365021706, 0.005326085723936558, -0.011106837540864944, -0.006332845892757177, -0.014549307525157928, 0.01987539231777191, 0.005845703650265932, 0.02390243299305439, 0.014874069020152092, 0.003913374152034521, 0.02299310266971588, -0.004043278284370899, -0.021434247493743896, -0.023772528395056725, 0.02130434289574623, -0.006982368417084217, 0.01182131189852953, -0.014874069020152092, -0.005845703650265932, -0.0031501848716288805, -0.009028364904224873, -0.004221897106617689, 0.017017493024468422, 0.02221367508172989, -0.017407206818461418, -0.024681860581040382, -0.013445118442177773, 0.014614259824156761, 0.0030689944978803396, -0.012470834888517857, -0.01363997533917427, -0.003101470647379756, -0.015003973618149757, -0.0036860411055386066, 0.013704927638173103, 0.012340930290520191, -0.03611345961689949, 0.003280089469626546, 0.02961823344230652, -0.006202941294759512, 0.007339606061577797, -0.003880897769704461, 0.0021921389270573854, 0.014939021319150925, -0.0003572374698705971, 0.00021312461467459798, 0.02052491530776024, -0.013575023040175438, 0.004449230153113604, 0.05144219473004341, -0.028578996658325195, -0.01623806543648243, 0.008378841914236546, -0.022343579679727554, 0.0026305667124688625, -0.013185310177505016, -0.02273329347372055, 0.00051555858226493, -0.005683323368430138, 0.011106837540864944, -0.0488441027700901, 0.004286849405616522, -0.021434247493743896, 0.01279559638351202, -0.005196181125938892, -0.024811765179038048, 0.014029689133167267, 0.024941669777035713, 0.008768555708229542, -0.005033800378441811, -0.0011366646504029632, -0.009742840193212032, 0.03611345961689949, 0.030657468363642693, -0.0032313752453774214, 0.006819987669587135, -0.008638651110231876, -0.0077942716889083385, -0.012146073393523693, -0.026630429551005363, 0.005293609574437141, -0.0038321835454553366, -0.012730644084513187, 0.012925500981509686, -0.005066276527941227, 0.002045996254310012, 0.028059378266334534, 0.015328734181821346, 0.022343579679727554, 0.0049038962461054325, 0.004027040209621191, -0.018966061994433403, -0.012405882589519024, 0.003085232572630048, -0.002435710048303008, 0.025201478973031044, -0.009093317203223705, 0.004449230153113604, 0.02870890125632286, 0.028059378266334534, 0.013704927638173103, 0.008573698811233044, 0.002054115291684866, 0.007079796865582466, 0.002257091226056218, 0.009158269502222538, -0.003880897769704461, 0.003215137170627713, 0.005943132098764181, -0.013964736834168434, -0.014484355226159096, -0.012211025692522526, 0.0005886299186386168, -0.01604321040213108, -0.02896871045231819, -0.005066276527941227, -0.000860617496073246, -0.030527563765645027, 0.013055405579507351, -0.016627779230475426, -0.002857899758964777, 0.02792947366833687, -0.003117708722129464, -0.0009945816127583385, -0.006202941294759512, -0.005358561873435974, 0.03208642080426216, 0.00256561441347003, 0.0193557757884264, -0.03585365042090416, -0.026370620355010033, 0.0012340929824858904, -0.01363997533917427, 0.007826748304069042, -0.006008084397763014, -0.007501986809074879, -0.017017493024468422, 0.030657468363642693, -0.0003389696357771754, 0.00020906511053908616, 0.003361279610544443, 0.0054884664714336395, -0.009028364904224873, 0.010587219148874283, 0.040790021419525146, 0.02338281460106373, -0.015328734181821346, 0.015198829583823681, 0.008703603409230709, 0.021953865885734558, 0.00922322180122137, 0.009158269502222538, -0.004741515498608351, 0.040270403027534485, 0.003020280273631215, 0.02273329347372055, 0.008638651110231876, -0.011366646736860275, -0.007339606061577797, -0.014744164422154427, -0.013834832236170769, 0.005910655949264765, -0.00896341260522604, 0.03585365042090416, -0.026240715757012367, 0.01792682521045208, 0.006722559221088886, 0.013250262476503849, -0.001120426575653255, 9.032424713950604e-05, 0.001112307538278401, -0.008898460306227207, -0.002070353366434574, -0.00824893731623888, 0.0004952610470354557, -0.009288174100220203, 0.01818663440644741, 0.01052226684987545, 0.0008687365334481001, -0.010782076045870781, -0.008768555708229542, 0.017796920612454414, -0.009288174100220203, 0.03559384122490883, -0.0029715660493820906, 0.020005296915769577, -0.00045263610081747174, -0.001981044188141823, 0.01675768382847309, 0.016887588426470757, -0.012275977991521358, -0.014159593731164932, -0.024941669777035713, -0.007339606061577797, -0.005520942620933056, 0.031696707010269165, -0.0013396404683589935, -0.01279559638351202, 0.005650847218930721, 0.0013558785431087017, -0.012016168795526028, 0.02273329347372055, -0.006819987669587135, 0.009158269502222538, 0.03013785183429718, 0.024811765179038048, -0.005683323368430138, 0.003198899095878005, 0.011756359599530697, -0.031177086755633354, 0.010327409952878952, -0.005326085723936558, -0.020005296915769577, 0.014874069020152092, -0.005098752677440643, 0.00401080260053277, -0.020265106111764908, -0.004059516359120607, 0.0031339467968791723, 0.005196181125938892, 0.0007997247739695013, 0.026110811159014702, -0.006170465145260096, -0.04234887659549713, -0.003296327544376254, -0.002159662777557969, -0.006722559221088886, 0.003702279180288315, -0.014679212123155594, 0.0031339467968791723, -0.0020135201048105955, 0.009483030997216702, -0.0034749461337924004, 0.02052491530776024, -0.0024681859649717808, -0.0021109485533088446, -0.02364262379705906, -0.009028364904224873, 0.0007550700684078038, 0.020135201513767242, -0.001981044188141823, 0.01766701601445675, -0.024811765179038048, -0.009612935595214367, -0.0008890341268852353, 0.005326085723936558, 0.019745487719774246, -0.003637326881289482, 0.005715799517929554, -0.019225871190428734, 0.013834832236170769, 0.017147397622466087, 0.018706252798438072, 0.006722559221088886, 0.0020216391421854496, 0.017537111416459084, 0.0006251655286177993, -0.0076968432404100895, -0.017017493024468422, -0.024681860581040382, 0.015328734181821346, 0.02299310266971588, 0.015393686480820179, 0.0076968432404100895, 0.008086556568741798]
2560
</code></pre>
<ol start="2">
<li>计算向量的余弦相似度</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics.pairwise <span class="keyword">import</span> cosine_similarity</span><br><span class="line"></span><br><span class="line">t_1=<span class="string">&quot;我喜欢吃苹果&quot;</span></span><br><span class="line">t_2=<span class="string">&quot;我最喜欢的水果是苹果&quot;</span></span><br><span class="line">t_3=<span class="string">&quot;今天天气真好&quot;</span></span><br><span class="line"></span><br><span class="line">v_1 = np.array(embedding_model.embed_query(t_1)).reshape(<span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line">v_2 = np.array(embedding_model.embed_query(t_2)).reshape(<span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line">v_3 = np.array(embedding_model.embed_query(t_3)).reshape(<span class="number">1</span>, -<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">cos_12=cosine_similarity(v_1, v_2)[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line">cos_13=cosine_similarity(v_1, v_3)[<span class="number">0</span>][<span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;句子1和句子2的相似度：<span class="subst">&#123;cos_12&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;句子1和句子3的相似度：<span class="subst">&#123;cos_13&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(cosine_similarity(v_1, v_2))</span><br></pre></td></tr></table></figure>

<pre><code>句子1和句子2的相似度：0.822040532194378
句子1和句子3的相似度：0.4891130173858015
[[0.82204053]]
</code></pre>
<ol start="3">
<li>向量数据库的构建</li>
</ol>
<ul>
<li>这里使用chroma</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_chroma <span class="keyword">import</span> Chroma</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vector_store = Chroma(</span><br><span class="line">    collection_name=<span class="string">&quot;example_collection&quot;</span>,</span><br><span class="line">    embedding_function=embedding_model,</span><br><span class="line">    persist_directory=<span class="string">&quot;./chroma_langchain_db&quot;</span>, <span class="comment"># Where to save data locally, remove if not necessary</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">vector_store.add_texts([<span class="string">&quot;香蕉是黄的&quot;</span>, <span class="string">&quot;苹果是红的&quot;</span>, <span class="string">&quot;葡萄是紫的&quot;</span>,<span class="string">&quot;橘子是橙的&quot;</span>], ids=[<span class="string">&quot;1&quot;</span>, <span class="string">&quot;2&quot;</span>, <span class="string">&quot;3&quot;</span>, <span class="string">&quot;4&quot;</span>])</span><br><span class="line"><span class="comment"># vector_store.add_texts([&quot;香蕉很长&quot;, &quot;我喜欢吃苹果&quot;, &quot;今天天气真好&quot;,&quot;我最爱吃苹果&quot;], ids=[&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;],filter=&#123;&quot;source&quot;: &quot;test&quot;&#125;)</span></span><br><span class="line"><span class="comment">#同时支持加入filter属性</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>




<pre><code>[&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">vector_store.similarity_search(<span class="string">&quot;红色的是什么水果?&quot;</span>, k=<span class="number">2</span>)</span><br></pre></td></tr></table></figure>




<pre><code>[Document(id=&#39;2&#39;, metadata={}, page_content=&#39;苹果是红的&#39;),
 Document(id=&#39;3&#39;, metadata={}, page_content=&#39;葡萄是紫的&#39;)]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">results = vector_store.similarity_search_with_score(<span class="string">&quot;红色的是什么水果?&quot;</span>, k=<span class="number">2</span>)</span><br><span class="line"><span class="keyword">for</span> doc, score <span class="keyword">in</span> results:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Score: <span class="subst">&#123;score&#125;</span>, Document: <span class="subst">&#123;doc&#125;</span> ...... <span class="subst">&#123;doc.page_content&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>Score: 1.0194851160049438, Document: page_content=&#39;苹果是红的&#39; ...... 苹果是红的
Score: 1.0429943799972534, Document: page_content=&#39;葡萄是紫的&#39; ...... 葡萄是紫的
</code></pre>
<ul>
<li>查看数据库</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">data=vector_store.get()</span><br><span class="line"><span class="built_in">print</span>(data)  <span class="comment"># 查看数据库中的数据,结构为字典</span></span><br></pre></td></tr></table></figure>

<pre><code>{&#39;ids&#39;: [&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39;], &#39;embeddings&#39;: None, &#39;documents&#39;: [&#39;香蕉是黄的&#39;, &#39;苹果是红的&#39;, &#39;葡萄是紫的&#39;, &#39;橘子是橙的&#39;], &#39;uris&#39;: None, &#39;included&#39;: [&#39;metadatas&#39;, &#39;documents&#39;], &#39;data&#39;: None, &#39;metadatas&#39;: [None, None, None, None]}
</code></pre>
<ol start="4">
<li>retriever及其链式使用,该方法返回的类继承自runnable,故可以加入LCEL</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">retriever=vector_store.as_retriever(search_type=<span class="string">&quot;similarity&quot;</span>, search_kwargs=&#123;<span class="string">&quot;k&quot;</span>:<span class="number">1</span>&#125;)</span><br><span class="line">retriever.invoke(<span class="string">&quot;红色的水果是什么?&quot;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>[Document(id=&#39;2&#39;, metadata={}, page_content=&#39;苹果是红的&#39;)]
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate</span><br><span class="line"><span class="comment"># 创建提示模板</span></span><br><span class="line">prompt = ChatPromptTemplate.from_messages([(<span class="string">&quot;human&quot;</span>, <span class="string">&quot;&#123;question&#125;&quot;</span>),])</span><br><span class="line"></span><br><span class="line">test=prompt.invoke(&#123;<span class="string">&quot;question&quot;</span>:<span class="string">&quot;红色的水果是什么？&quot;</span>&#125;)</span><br><span class="line"><span class="comment"># print(&quot;test&quot;, test, test.to_string())</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 格式转换函数，prompt.invoke⽅法返回PromptValue，⽽retriver.invoke需要传⼊的参数为str。中间做个格式转换</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">format_prompt_value</span>(<span class="params">prompt_value</span>):</span><br><span class="line">    <span class="keyword">return</span> prompt_value.to_string()</span><br><span class="line"><span class="comment"># 链式连接检索器和提示模板</span></span><br><span class="line">chain = prompt | format_prompt_value |retriever</span><br><span class="line"><span class="comment"># 调⽤链并传⼊⽤户的问题</span></span><br><span class="line">documents = chain.invoke(&#123;<span class="string">&quot;question&quot;</span>:<span class="string">&quot;红色的水果是什么？&quot;</span>&#125;)</span><br><span class="line"><span class="keyword">for</span> document <span class="keyword">in</span> documents:</span><br><span class="line">    <span class="built_in">print</span>(document)</span><br></pre></td></tr></table></figure>

<pre><code>page_content=&#39;苹果是红的&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

            </article>
        </div>
    </div>
</div>
    </main>

    <footer
        style="text-align: center; padding: 50px; color: #444; font-size: 0.8rem; font-family: 'JetBrains Mono', monospace;">
        <p>SiyuanZhang @ SJTU | SYSTEM ONLINE</p>
    </footer>

    <!-- 脚本部分 -->
    <script>
        window.onscroll = function () {
            var winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            var height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            var scrolled = (winScroll / height) * 100;
            document.getElementById("progress-bar").style.width = scrolled + "%";
        };
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.net.min.js"></script>

    <script>
        if (window.innerWidth > 768) {
            VANTA.NET({
                el: "body",
                mouseControls: true,
                touchControls: true,
                gyroControls: false,
                minHeight: 200.00,
                minWidth: 200.00,
                scale: 1.00,
                scaleMobile: 1.00,
                color: 0xFFC800,       // 已改为黄色
                backgroundColor: 0x050505,
                points: 8.00,
                maxDistance: 22.00,
                spacing: 40.00
            })
        }
    </script>
</body>

</html>